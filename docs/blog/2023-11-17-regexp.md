---
pageClass: blog-page
title: æ­£åˆ™è¡¨è¾¾å¼ in Javascript
tags:
  - web
  - javaScript
date: 2023-11-17
author: cp3hnu
location: ChangSha
summary: è¯¦ç»†è®²è§£æ€ä¹ˆåœ¨ JavaScript ä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒæ—¶ä»‹ç» String ä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³çš„ APIï¼Œæœ€åæ¨èä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³çš„ä¸€äº›å·¥å…·æˆ–ç½‘ç«™ä»¥åŠä¸€äº›å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚
---

# æ­£åˆ™è¡¨è¾¾å¼ in Javascript

é¦–å…ˆç”³æ˜ä¸€ä¸‹ï¼Œè¿™ä¸æ˜¯ä¸€ç¯‡è®²æ€ä¹ˆå†™æ­£åˆ™è¡¨è¾¾å¼çš„æ–‡ç« ï¼Œè¿™æ–¹é¢çš„æ–‡ç« æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ [RegexLearn](https://regexlearn.com/)ã€[RegexOne](https://regexone.com/)ã€[æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹](https://www.jb51.net/tools/zhengze.html)ç­‰ã€‚

è¿™ç¯‡æ–‡ç« å°†ä»‹ç»æ€ä¹ˆåœ¨ JavaScript ä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒæ—¶ä»‹ç» String ä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³çš„ APIï¼Œæœ€åæ¨èä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³çš„ä¸€äº›å·¥å…·æˆ–ç½‘ç«™ä»¥åŠä¸€äº›å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚

## RegExp

åœ¨ Javascript ä¸­ä½¿ç”¨ [`RegExp`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp) æ¥è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œæœ‰ä¸¤ç§æ–¹å¼æ¥åˆ›å»º `RegExp`ã€‚

å¸¸ç”¨çš„æ˜¯å­—é¢æ ‡è®°æ³• (literal notation)ï¼Œä¾‹å¦‚

```js
const reg = /[a-z]/g
```

å¦ä¸€ç§æ˜¯ä½¿ç”¨ `RegExp` æ„é€ å‡½æ•°ï¼Œä¸»è¦æ˜¯ç”¨äºåŠ¨æ€æ„å»º `RegExp`ï¼Œä¾‹å¦‚ï¼š

```js
const reg = new RegExp(isNumber ? "\d" : "[a-z]", "g")
```

`RegExp` é™¤äº†å®šä¹‰è¡¨è¾¾å¼ä¹‹å¤–ï¼Œè¿˜å®šä¹‰äº† flagï¼Œå®ƒå°†å½±å“ `RegExp` çš„åŒ¹é…è¡Œä¸ºã€‚

| Flag | è¯´æ˜                                           | `RegExp` ä¸­å¯¹åº”çš„å±æ€§                                        |
| :--- | :--------------------------------------------- | :----------------------------------------------------------- |
| `g`  | å…¨å±€æœç´¢                                       | [`global`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/global) |
| `i`  | å¤§å°å†™ä¸æ•æ„Ÿ                                   | [`ignoreCase`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/ignoreCase) |
| `m`  | å…è®¸ `^` å’Œ `$` åŒ¹é…æ¢è¡Œç¬¦                     | [`multiline`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/multiline) |
| `s`  | å…è®¸ `.` åŒ¹é…æ¢è¡Œç¬¦                            | [`dotAll`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/dotAll) |
| `y`  | æ‰§è¡Œä»ç›®æ ‡å­—ç¬¦ä¸²ä¸­çš„å½“å‰ä½ç½®å¼€å§‹åŒ¹é…"ç²˜æ€§"æœç´¢ | [`sticky`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/sticky) |
| `d`  | ä¸ºå­å­—ç¬¦ä¸²åŒ¹é…ç”Ÿæˆç´¢å¼•                         | [`hasIndices`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/hasIndices) |
| `u`  | å°†æ¨¡å¼è§†ä¸º Unicode ç ä½åºåˆ—                    | [`Unicode`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/Unicode) |
| `v`  | å‡çº§åˆ°å…·æœ‰æ›´å¤š Unicode åŠŸèƒ½çš„ `u` æ¨¡å¼         | [`UnicodeSets`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/UnicodeSets) |

### API

RegExp ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š[`test()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test) å’Œ [`exec()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec)ï¼Œä¸€ä¸ªå±æ€§ [`lastIndex`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/lastindex)ã€‚

#### `test`

```ts
test(str: string): boolean
```

`test()` ç”¨æ¥æ£€æŸ¥æ­£åˆ™è¡¨è¾¾å¼ä¸æŒ‡å®šçš„å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…ï¼ŒåŒ¹é…æ—¶è¿”å› `true`ï¼Œå¦åˆ™è¿”å› `false`ã€‚

`test()` å‚æ•°å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œéå­—ç¬¦ä¸²å‚æ•°ä¼šè¢«å¼ºåˆ¶è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ `undefined` å°†è¢«è½¬æ¢æˆ `"undefined"`ã€‚

```js
const str = 'football';
const regex = /foo/;
regex.test(str); // true
```

å½“å¸¦æœ‰ global (`g`) æˆ– sticky (`y`) flag æ—¶ï¼Œæ‰§è¡Œ `test()` ä¼šä¿®æ”¹ `lastIndex` å±æ€§ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ï¼Œä¼šä» `lastIndex` ä½ç½®å¼€å§‹è¿›è¡ŒåŒ¹é…ï¼Œå¹¶ä¸”ä¸ç®¡åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™ä¸€ç‚¹è¦æ³¨æ„ã€‚

```js
const str = 'football';
const regex = /foo/g;
regex.test(str); // true
regex.lastIndex; // 3

regex.test(str); // false
regex.lastIndex; // 0
```

å½“ `test()` æ²¡æœ‰æ‰¾åˆ°åŒ¹é…é¡¹æ—¶ï¼Œä¼šé‡ç½® `lastIndex` ä¸º 0ã€‚

#### `exec`

```ts
exec(str: string): string[] | null
```

å’Œ `test()` ä¸€æ ·ï¼Œ `exec()` çš„å‚æ•°ä¹Ÿå¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œéå­—ç¬¦ä¸²å‚æ•°ä¼šè¢«å¼ºåˆ¶è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚

`exec()` æ¯” `test()` çš„åŠŸèƒ½è¦å¼ºå¤§çš„å¤šã€‚å½“æ‰¾åˆ°åŒ¹é…é¡¹æ—¶ï¼Œå®ƒè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œå…¶ä¸­ç¬¬ä¸€é¡¹æ˜¯åŒ¹é…çš„å­å­—ç¬¦ä¸²ï¼Œåé¢è·Ÿç€çš„æ˜¯æ•è·ç»„å­—ç¬¦ä¸²ï¼Œé™¤æ­¤ä¹‹å¤–è¿”å›çš„å­—ç¬¦ä¸²æ•°ç»„è¿˜æœ‰ä»¥ä¸‹ 4 ä¸ªå±æ€§ã€‚

| å±æ€§      | è¯´æ˜                                                         |
| --------- | ------------------------------------------------------------ |
| `index`   | åŒ¹é…çš„å­å­—ç¬¦ä¸²åœ¨å‚æ•°å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®                         |
| `input`   | å‚æ•°å­—ç¬¦ä¸²                                                   |
| `groups`  | å‘½åçš„æ•è·ç»„å¯¹è±¡ï¼Œæ•è·ç»„åç§°ä¸ºå¯¹è±¡çš„å±æ€§å                   |
| `indices` | åŒ¹é…çš„å­å­—ç¬¦ä¸²å’Œæ•è·ç»„å­—ç¬¦ä¸²çš„ä½ç½®ä¿¡æ¯ï¼Œå¿…é¡»å¸¦æœ‰ hasIndices (`d` ) flag æ‰ä¼šè¿”å› |

å½“æ²¡æ‰¾åˆ°åŒ¹é…é¡¹æ—¶ï¼Œè¿”å› `null`ã€‚

ä¸¾ä¸ªä¾‹å­

```js
const re = /quick\s(?<color>brown).+?(jumps)/dgi;
const result = re.exec("The Quick Brown Fox Jumps Over The Lazy Dog");
```

è¿”å›ç»“æœï¼š

| å±æ€§      | å€¼                                                           |
| :-------- | :----------------------------------------------------------- |
| `[0]`     | `"Quick Brown Fox Jumps"`                                    |
| `[1]`     | `"Brown"`                                                    |
| `[2]`     | `"Jumps"`                                                    |
| `index`   | `4`                                                          |
| `input`   | `"The Quick Brown Fox Jumps Over The Lazy Dog"`              |
| `groups`  | `{ color: "brown" }`                                         |
| `indices` | `[[4, 25], [10, 15], [20, 25]]` <br/>`groups: { color: [10, 15 ]}` |

> `indices` è¿”å›çš„å‰é—­åå¼€çš„ä½ç½®ä¿¡æ¯ï¼Œ[4, 25)ï¼Œå¼€å§‹ä½ç½®æ˜¯ 4ï¼Œç»“æŸä½ç½® 25ï¼ˆä¸åŒ…æ‹¬ï¼‰
>
> indices ä¹Ÿæœ‰ä¸€ä¸ªå±æ€§ `groups`ï¼Œä¿å­˜å‘½åæ•è·ç»„å­—ç¬¦ä¸²çš„ä½ç½®ä¿¡æ¯

å’Œ `test()` ä¸€æ ·ï¼Œå½“å¸¦æœ‰ global (`g`) æˆ– sticky (`y`) flag æ—¶ï¼Œæ‰§è¡Œ `exec()` ä¼šä¿®æ”¹ `lastIndex` å±æ€§ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ï¼Œä¼šä» `lastIndex` ä½ç½®è¿›è¡ŒæŸ¥è¯¢ã€‚

äº‹å®ä¸Šï¼Œ`test()` æ˜¯å¯¹ `exec()` çš„å°è£…ã€‚

```js
RegExp.prototype.test = function(str) {
  return this.exec(str) !== null;
}
```

#### `lastIndex`

è¡¨ç¤ºä¸‹ä¸€æ¬¡ä»å‚æ•°å­—ç¬¦ä¸²çš„ä»€ä¹ˆä½ç½®å¼€å§‹è¿›è¡ŒåŒ¹é…ï¼Œå®ƒåªå½±å“å¸¦æœ‰ global (`g`) æˆ– sticky (`y`) flag çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒæ—¶ä¹Ÿè¢«å®ƒä»¬ä¿®æ”¹ã€‚

```javascript
const reg = /[a-z]/g;
reg.lastIndex = 6;
reg.exec("abc123abc"); // [ 'd', index: 6, input: 'abc123abc', groups: undefined ]
reg.lastIndex;         // 7
```

##### å¯¹ String API çš„å½±å“

å¯¹ String API çš„å½±å“ï¼Œæœ‰ä¸‹é¢ 3 ç§æƒ…å†µï¼š

1. å½“ `replace()`ï¼Œ`match()` çš„å‚æ•°æ˜¯åªå¸¦æœ‰ `y` flagï¼ˆæ²¡æœ‰ `g` flagï¼‰çš„ `RegExp` æ—¶ï¼Œä¼šå— `lastIndex` çš„å½±å“ï¼Œå¹¶ä¿®æ”¹å®ƒã€‚        
2. å½“ `replaceAll()`ï¼Œ`matchAll()` çš„å‚æ•°æ˜¯å¸¦æœ‰  `g`  å’Œ `y`  flag çš„ `RegExp` æ—¶ï¼Œæˆ–è€… `matchAll()` çš„å‚æ•°æ˜¯åªå¸¦æœ‰ `g` flag  çš„ `RegExp` æ—¶ï¼Œä¼šå— `lastIndex` çš„å½±å“ï¼Œä½†æ˜¯ä¸ä¼šä¿®æ”¹å®ƒã€‚
3. å…¶å®ƒæƒ…å½¢ï¼Œä¸ä¼šå— `lastIndex` çš„å½±å“ï¼Œä¹Ÿä¸ä¿®æ”¹å®ƒã€‚

### Flags

æ¥ä¸‹æ¥ä»‹ç»ä¸åŒçš„ flag æ€æ ·å½±å“æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ã€‚`i`ã€`s` flag å¾ˆå¥½ç†è§£ï¼Œè¿™é‡Œå°±ä¸å±•å¼€è¯´äº†ã€‚

#### global (`g`) å’Œ sticky (`y`)

global (`g`) å’Œ sticky (`y`)ï¼Œéƒ½å°†ä¿®æ”¹ `RegExp` å¯¹è±¡çš„ `lastIndex` å±æ€§ï¼Œä½¿å¾—åŒ¹é…å¾€ä¸‹æ¨è¿›ï¼Œå½“æ²¡æœ‰æ‰¾åˆ°åŒ¹é…é¡¹æ—¶ï¼Œéƒ½ä¼šé‡ç½® `lastIndex` ä¸º 0ã€‚ä¸åŒçš„æ˜¯ global (`g`) ä¼šæœç´¢ **`lastIndex` åŠä¹‹å**ä½ç½®çš„å­—ç¬¦ä¸²ï¼Œè€Œ sticky (`y`) å¿…é¡»åœ¨ **`lastIndex` å½“å‰ä½ç½®**è¿›è¡ŒåŒ¹é…ã€‚

```js
const str ="abc123abc"
const globalReg = /abc/g;
const stickyReg = /abc/y
// ç¬¬ä¸€æ¬¡
globalReg.test(str); // true
globalReg.lastIndex; // 3
stickyReg.test(str); // true
stickyReg.lastIndex; // 3
// ç¬¬äºŒæ¬¡
globalReg.test(str); // true
globalReg.lastIndex; // 9
stickyReg.test(str); // falseï¼Œå› ä¸ºä½ç½® 3 ä¸Šæ˜¯ "1" ä¸æ˜¯ "a"
stickyReg.lastIndex; // 0
```

å¦‚æœåŒæ—¶æœ‰ `g` å’Œ `y` flagï¼Œå¯¹äº `exec()` å’Œ `test()` æ–¹æ³•ï¼Œä¿ç•™ `y` flagï¼Œè€Œå¿½ç•¥ `g`ã€‚

è€Œå¯¹äºä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³çš„ String  APIï¼Œæ€»ç»“å¦‚ä¸‹ï¼š

| API          | è¯´æ˜                                                        |
| ------------ | ----------------------------------------------------------- |
| `search`     | `g` æœ¬èº«ä¼šè¢«å¿½ç•¥ï¼Œæ‰€ä»¥åªæœ‰ `y` flag èµ·ä½œç”¨                  |
| `replace`    | åŒ¹é…éµå¾ª `y` flagï¼Œä½†æ˜¯æ›¿æ¢æ‰€æœ‰çš„åŒ¹é…é¡¹                     |
| `replaceAll` | åŒ¹é…éµå¾ª `y` flagï¼Œä½†æ˜¯æ›¿æ¢æ‰€æœ‰çš„åŒ¹é…é¡¹                     |
| `match`      | åŒ¹é…éµå¾ª `y` flagï¼Œä½†æ˜¯è¿”å›æ‰€æœ‰çš„åŒ¹é…é¡¹                     |
| `matchAll`   | åŒ¹é…éµå¾ª `y` flagï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨ç”Ÿæˆæ‰€æœ‰çš„åŒ¹é…é¡¹ |
| `split`      | éƒ½è¢«å¿½ç•¥                                                    |

æ€»ç»“ä¸€ä¸‹ï¼šé™¤ `search()` å’Œ `split()` ä¹‹å¤–ï¼Œ å…¶å®ƒæ–¹æ³•åœ¨æ­£åˆ™è¡¨è¾¾å¼åŒæ—¶æœ‰ `g` å’Œ `y` flag æ—¶ï¼ŒåŒ¹é…éµå¾ª `y` flag çš„åŸåˆ™ï¼Œä½†æ˜¯ä¼šå¾€ä¸‹è¿›è¡ŒåŒ¹é…ï¼Œç›´åˆ°æ‰¾ä¸åˆ°åŒ¹é…é¡¹ä¸ºæ­¢ã€‚

æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ [sticky](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/sticky)ã€‚

#### multiline (`m`)

å¤šè¡Œæ¨¡å¼ä¸‹ï¼Œå…è®¸ `^` å’Œ `$` åŒ¹é…æ¢è¡Œç¬¦ï¼Œæ‰€ä»¥ `m` åªå½±å“å¸¦æœ‰ `^` å’Œ `$` çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå…è®¸å®ƒä»¬åŒ¹é…æ¢è¡Œç¬¦ï¼Œå¦åˆ™åªåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹å’Œç»“æŸã€‚

```js
const str ="123\nabc"
const reg = /^abc/;
const multilineReg = /^abc/m;

reg.test(str); // false
multilineReg.test(str); // true
```

#### hasIndices (`d`)

>  `d` flag æ˜¯åœ¨ ES2022 æˆä¸ºæ ‡å‡†çš„ã€‚

ä½¿ç”¨ `d` flagï¼Œæ‰§è¡Œ `exec()` æ—¶è¿”å›åŒ¹é…çš„å­å­—ç¬¦ä¸²å’Œæ•è·ç»„å­—ç¬¦ä¸²çš„ä½ç½®ä¿¡æ¯ï¼Œå¦‚ `exec()` çš„ä¾‹å­æ‰€ç¤ºã€‚ 

> è¯¦æƒ…è¯·å‚è€ƒ [RegExp Match Indices](/2023/06/09/what-s-new-ecmascript-2/#regexp-match-indices)ã€‚

#### Unicode (`u`)

åŒ¹é… Unicode ç ç‚¹è½¬ä¹‰ï¼ˆUnicode point code escapeï¼‰`\u{xxxx}`ã€‚

> Unicodeï¼šç»Ÿä¸€ç ï¼Œæ˜¯ä¸ºäº†è§£å†³ä¼ ç»Ÿçš„å­—ç¬¦ç¼–ç æ–¹æ¡ˆçš„å±€é™è€Œäº§ç”Ÿçš„ï¼Œå®ƒä¸ºæ¯ç§è¯­è¨€ä¸­çš„æ¯ä¸ªå­—ç¬¦è®¾å®šäº†ç»Ÿä¸€å¹¶ä¸”å”¯ä¸€çš„äºŒè¿›åˆ¶ç¼–ç ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒ [Unicode å®˜ç½‘](https://www.Unicode.org/versions/Unicode15.0.0/)ã€[Unicode ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/%E7%BB%9F%E4%B8%80%E7%A0%81/2985798?fromtitle=Unicode&fromid=750500&fr=aladdin)ã€‚

æ¯”å¦‚:

```javascript
/\u{8d75}/u.test("èµµ") // true
```

æœ€é‡è¦çš„æ˜¯ï¼ŒES2018 å¼•å…¥ `\p{â€¦}` å’Œ  `\P{â€¦}` Unicode å­—ç¬¦ç±»è½¬ä¹‰ï¼ˆUnicode character class escapeï¼‰ã€‚å®ƒçš„åŸç†æ˜¯æ¯ä¸ª Unicode å­—ç¬¦éƒ½æœ‰ä¸€ç»„æè¿°å®ƒçš„å±æ€§ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ `a` å…·æœ‰ `General_Category` çš„ `Lowercase_Letter` å±æ€§å’Œ `Script` çš„ `Latn` å±æ€§ã€‚ `\p` å’Œ `\P` è½¬ä¹‰åºåˆ—å…è®¸æˆ‘ä»¬æ ¹æ®å­—ç¬¦çš„å±æ€§æ¥åŒ¹é…å­—ç¬¦ã€‚

```javascript
/\p{General_Category=Letter}/u.test("a"); // true
/\p{Script=Latn}/u.test("a");             // true
```

`\P` æ˜¯ `\p` çš„è¡¥é›†ï¼Œè¡¨ç¤ºä¸å…·å¤‡æŸä¸ªå±æ€§çš„å­—ç¬¦ã€‚

å†ä¸¾ä¸€ä¸ªä¸­æ–‡æ­£åˆ™è¡¨è¾¾å¼çš„ä¾‹å­ï¼Œä»¥å‰è¯´åˆ°åŒ¹é…ä¸­æ–‡çš„æ­£åˆ™è¡¨è¾¾å¼åŸºæœ¬ä¸Šéƒ½æ˜¯æŒ‡ä¸‹é¢è¿™ä¸ªï¼š

```javascript
/[\u4e00-\u9fa5]/
```

ä½†æ˜¯è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼å·²ç»è¿‡æ—¶äº†ï¼Œå› ä¸º Unicode å­—ç¬¦ä¸€ç›´åœ¨æ›´æ–°ï¼Œæ¯”å¦‚ Unicode 8.0 æ·»åŠ çš„ 109 å·åŒ–å­¦å…ƒç´ ã€é¿ã€‘ï¼Œå…¶ç ç‚¹æ˜¯ `9FCF`ï¼Œå°±ä¸åœ¨è¿™ä¸ªèŒƒå›´å†…ï¼Œæ‰€ä»¥ç°ä»£çš„è¡¨ç¤ºä¸­æ–‡å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼æ˜¯ï¼š

```javascript
/\p{Unified_Ideograph}/u
```

æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ [JavaScript æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ±‰å­—](https://zhuanlan.zhihu.com/p/33335629)ã€‚

å…³äº Unicode æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ [Unicode character class escape](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Regular_expressions/Unicode_character_class_escape)ã€‚

#### UnicodeSet (`v`)

> UnicodeSet åªèƒ½åœ¨æ–°ç‰ˆæµè§ˆå™¨æ‰èƒ½ä½¿ç”¨ã€‚

UnicodeSet (`v`) æ˜¯ Unicode (`u`) çš„å¢å¼ºç‰ˆï¼Œè¡¨ç¤ºï¼š

- `\p` è½¬ä¹‰åºåˆ—ä¸ä»…ä»…åŒ¹é…å­—ç¬¦çš„å±æ€§ï¼Œè¿˜å¯ä»¥ç”¨äºåŒ¹é…å­—ç¬¦ä¸²çš„å±æ€§ã€‚
- å‡çº§äº† [character class](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Regular_expressions/Character_class)ï¼Œå…è®¸äº¤é›†ã€å¹¶é›†å’Œå‡é›†ï¼Œä»¥åŠåŒ¹é…å¤šä¸ª Unicode å­—ç¬¦ã€‚
- `[^...]` è¯­æ³•æ„é€ è¡¥ç ç±»ï¼Œè€Œä¸æ˜¯å¦å®šåŒ¹é…ç»“æœï¼Œæ¯”å¦‚ `[^\p{X}]` = `^\P{X}`,  `[^\P{X}]` = `^\p{X}`ï¼Œé¿å…äº†ä¸€äº›ä¸åŒºåˆ†å¤§å°å†™çš„åŒ¹é…çš„æ··æ·†è¡Œä¸ºã€‚æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ [Complement classes and case-insensitive matching](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Regular_expressions/Character_class#complement_classes_and_case-insensitive_matching)ã€‚

æ¯”å¦‚ï¼ŒåŒ¹é… "Script Extensions" ä¸º "Greek" ä¸” "Category Property" ä¸º "Letter" çš„å­—ç¬¦ï¼š

```javascript
/[\p{Script_Extensions=Greek}&&\p{Letter}]/v
```

### æ•è·ç»„å’Œé›¶å®½æ–­è¨€

æ•è·ç»„å’Œé›¶å®½æ–­è¨€çš„è¯­æ³•å¦‚ä¸‹ï¼š

| åˆ†ç±»     | è¯­æ³•            | è¯´æ˜                                             |
| -------- | --------------- | :----------------------------------------------- |
| æ•è·     | (exp)           | åŒ¹é… expï¼Œå¹¶æ•è·æ–‡æœ¬åˆ°è‡ªåŠ¨å‘½åçš„ç»„é‡Œ             |
|          | (?&lt;name>exp) | åŒ¹é… expï¼Œå¹¶æ•è·æ–‡æœ¬åˆ°åç§°ä¸º name çš„ç»„é‡Œ         |
|          | (?:exp)         | åŒ¹é… expï¼Œä¸æ•è·åŒ¹é…çš„æ–‡æœ¬ï¼Œä¹Ÿä¸ç»™æ­¤åˆ†ç»„åˆ†é…ç»„å· |
| é›¶å®½æ–­è¨€ | (?=exp)         | åŒ¹é… exp å‰é¢çš„ä½ç½®(åŒ¹é…åé¢æ˜¯ exp çš„æ•°æ®)       |
|          | (?<=exp)        | åŒ¹é… exp åé¢çš„ä½ç½®(åŒ¹é…å‰é¢æ˜¯ exp çš„æ•°æ®)       |
|          | (?!exp)         | åŒ¹é…åé¢è·Ÿçš„ä¸æ˜¯ exp çš„ä½ç½®                      |
|          | (?<!exp)        | åŒ¹é…å‰é¢ä¸æ˜¯ exp çš„ä½ç½®                          |

å¦‚ä½•åœ¨ JavaScript ä½¿ç”¨æ•è·ç»„å’Œé›¶å®½æ–­è¨€ï¼Œè¯·å‚è€ƒ [Named capture groups](/2022/04/09/what-s-new-ecmascript/#named-capture-groups)ã€‚

æœ‰ä¸€ä¸ªæœ‰è¶£çš„ä¾‹å­ï¼ŒåŒ¹é…ä¸ä»¥ ing ç»“å°¾çš„å•è¯ã€‚

```javascript
const text = "I am running, jumping, and singing.";
const regex = /\b\w+(?<!ing)\b/g;
const matches = text.match(regex);
console.log(matches); // [ 'I', 'am', 'and' ]
```

### è½¬ä¹‰

å› ä¸ºæœ‰äº›å­—ç¬¦åœ¨æ­£åˆ™è¡¨è¾¾å¼é‡Œæœ‰ç‰¹æ®Šçš„å«ä¹‰ï¼ˆæ¯”å¦‚ `*` è¡¨ç¤ºåŒ¹é… 0 ä¸ªæˆ–è€…å¤šä¸ªï¼‰ï¼Œå½“éœ€è¦åŒ¹é…å­—ç¬¦æœ¬èº«æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨ `\` è¿›è¡Œè½¬ä¹‰ï¼ˆæ¯”å¦‚ä½¿ç”¨ `\*` æ¥åŒ¹é… `*` å­—ç¬¦ï¼‰ï¼Œ éœ€è¦è½¬ä¹‰çš„å­—ç¬¦æœ‰ 15 ä¸ªã€‚

```
.*+?^$|\{}()[]/
```

> `/`  åªåœ¨å­—é¢æ ‡è®°æ³•ä¸­éœ€è¦è½¬ä¹‰

å› ä¸º `\` åœ¨å­—ç¬¦ä¸²é‡Œä¹Ÿéœ€è¦è½¬ä¹‰ï¼ˆ`\\`ï¼‰ï¼Œæ‰€ä»¥ç”¨å­—ç¬¦ä¸²åˆ›å»º Rexg æ—¶ï¼Œéœ€è¦å¤šæ¬¡è½¬ä¹‰ã€‚

```js
const reg = new RegExp("\\*");
```

å¯ä»¥æä¾›ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å¿«é€Ÿå¤„ç†è¿™äº›è½¬ä¹‰ã€‚

```js
function escapeRegExp(string) {
  return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&"); // $& è¡¨ç¤ºæ•´ä¸ªåŒ¹é…çš„å­—ç¬¦ä¸²
}
```

`[]` é‡Œé¢éœ€è¦è½¬ä¹‰çš„å­—ç¬¦æœ‰ 4 ä¸ªã€‚

```
^]\-
```

> å¦‚æœ `^` ä¸æ˜¯æ”¾åœ¨ç¬¬ä¸€ä¸ªï¼Œåˆ™ä¸éœ€è¦è½¬ä¹‰ã€‚`-` ä¸æ”¾åœ¨ä¸­é—´ï¼Œä¹Ÿä¸éœ€è¦è½¬ä¹‰ã€‚

## String

String ä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³çš„æ–¹æ³•æœ‰ï¼š[`search()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/search)ã€[`replace()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)ã€[`replaceAll()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replaceAll)ã€[`match()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match)ã€[`matchAll()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll) å’Œ [`split()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split#using_split)ã€‚

### `search`

```ts
search(regexp: RegExp): number
```

æœç´¢ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­å­—ç¬¦ä¸²ã€‚å¦‚æœæ‰¾åˆ°äº†ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„èµ·å§‹ä½ç½®ï¼Œå¦åˆ™åˆ™è¿”å› -1ã€‚

å‚æ•°å¿…é¡»æ˜¯ `RegExp`ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä¼šè¢« `new RegExp()` è½¬æ¢æˆ `RegExp`ã€‚

> global (`g`) flag å’Œ `lastIndex` æ²¡æœ‰ä½œç”¨ã€‚

```javascript
const str = "hey JudE";
const capitalReg = /[A-Z]/;
const numberReg = /[0-9]/;
str.search(capitalReg);   // 4
str.search(numberReg);    // -1
```

å½“å¸¦æœ‰ sticky (`y`) flag æ—¶ï¼Œå¿…é¡»åœ¨å­—ç¬¦ä¸²çš„å¼€å¤´åŒ¹é…ã€‚

```javascript
const str = "hey JudE";
const capitalReg = /[A-Z]/y;
str.search(capitalReg);           // -1
"Hey JudE".search(capitalReg);    // 0
```

### `replace`

```typescript
replace(pattern: string | RegExp, replacement: string | Function): string
```

æœç´¢ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­å­—ç¬¦ä¸²ï¼Œå¹¶ç”¨æ›¿æ¢é¡¹è¿›è¡Œæ›¿æ¢ï¼Œè¿”å›æ›¿æ¢åçš„å­—ç¬¦ä¸²ï¼Œæºå­—ç¬¦ä¸²ä¸å˜ã€‚

å¦‚æœ `pattern` æ˜¯å­—ç¬¦ä¸²ï¼Œæˆ–è€…æ˜¯æ²¡æœ‰ global (`g`) flag çš„ `RegExp`ï¼Œåˆ™åªæ›¿æ¢ä¸€æ¬¡ã€‚

å‚æ•° `pattern` å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™æ“ä½œéå¸¸ç®€å•ï¼Œç”¨ `replacement` æ›¿æ¢ `pattern` å³å¯ã€‚

å¦‚æœ `pattern` æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œåˆ™æ›¿æ¢é¡¹å°†è¿½åŠ åˆ°å­—ç¬¦ä¸²çš„å¼€å¤´ã€‚

```javascript
"xxx".replace("", "_"); // "_xxx"
```

å‚æ•° `replacement` å¯ä»¥å­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªå‡½æ•°

#### `replacement` æ˜¯å­—ç¬¦ä¸² 

å½“ `replacement` æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›ç‰¹æ®Šæ ‡è®°

| æ ‡è®°      | è¯´æ˜                                 |
| :-------- | :----------------------------------- |
| `$$`      | `"$"` å­—ç¬¦                           |
| `$&`      | åŒ¹é…çš„å­å­—ç¬¦ä¸²                       |
| `` $` ``  | å­—ç¬¦ä¸²ä¸­åŒ¹é…å­å­—ç¬¦ä¸²å‰é¢çš„éƒ¨åˆ†       |
| `$'`      | å­—ç¬¦ä¸²ä¸­åŒ¹é…å­å­—ç¬¦ä¸²åé¢çš„éƒ¨åˆ†       |
| `$n`      | æ•è·ç»„ï¼Œå…¶ä¸­ `n` ä¸ºå°äº 100 çš„æ­£æ•´æ•° |
| `$<Name>` | å‘½åæ•è·ç»„ï¼Œå…¶ä¸­ `Name` æ•è·ç»„åç§°   |

ä¾‹å¦‚ï¼š

```javascript
const str = "123456789";
const newStr = str.replace(/(\d{3})/, "($1)"); // (123)456789
```

å¦‚æœ `pattern` æ˜¯å­—ç¬¦ä¸²ï¼Œæˆ–è€…æ­£åˆ™è¡¨è¾¾å¼ä¸­ä¸å­˜åœ¨ç›¸åº”çš„æ•è·ç»„æ—¶ï¼Œåˆ™æ›¿æ¢ä¸ºå­—ç¬¦æœ¬èº«ï¼Œå³ `"$1"`ã€‚

å¦‚æœæ•è·ç»„å­˜åœ¨ä½†ä¸åŒ¹é…ï¼Œåˆ™æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²ã€‚

#### `replacement` æ˜¯å‡½æ•°

å½“ `replacement` æ˜¯å‡½æ•°æ—¶ï¼Œå‡½æ•°ç­¾åå¦‚ä¸‹ï¼š

```javascript
function replacer(match, p1, p2, /* â€¦, */ pN, offset, string, groups) {
  return replacement;
}
```

å‡½æ•°è¿”å›çš„å€¼ä½œä¸ºæ›¿æ¢é¡¹ï¼Œä¸Šé¢çš„ç‰¹æ®Šæ ‡è®°ä¸èƒ½ä½¿ç”¨ã€‚

å‚æ•°è¯´æ˜ï¼š

| å‚æ•°          | è¯´æ˜                                       |
| ------------- | ------------------------------------------ |
| `match`       | åŒ¹é…çš„å­å­—ç¬¦ä¸²ï¼Œç›¸å½“äº `$&`                |
| `p1` ... `pN` | æ•è·ç»„ï¼Œç›¸å½“äº `$n`                        |
| `offset`      | åŒ¹é…çš„å­å­—ç¬¦ä¸²åœ¨æºå­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•           |
| `string`      | æºå­—ç¬¦ä¸²                                   |
| `groups`      | å‘½åæ•è·ç»„ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå±æ€§ä¸ºæ•è·ç»„åç§° |

> å¦‚æœ `pattern` æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™æ²¡æœ‰æ•è·ç»„ç›¸å…³çš„å‚æ•°ï¼Œåªæœ‰ `match`ã€`offset`ã€`string`ã€‚

ä¸¾ä¸ªä¾‹å­

```javascript
function replacer(match, p1, p2, p3, offset, string) {
  return [p1, p2, p3].join(" - ");
}
const newString = "abc12345#$*%".replace(/([^\d]*)(\d*)([^\w]*)/, replacer); 
// abc - 12345 - #$*%
```

#### å…¨å±€æ›¿æ¢

`replace()` åªæ›¿æ¢ä¸€æ¬¡ï¼Œå¦‚æœæƒ³è¦å…¨éƒ¨æ›¿æ¢ï¼Œéœ€è¦ä½¿ç”¨ global (`g`) flagã€‚

```javascript
const str = "123456789";
const newStr = str.replace(/(\d{3})(?!$)/g, "$1-"); // 123-456-789
```

å½“å…¨å±€æ›¿æ¢æ—¶ï¼Œå¦‚æœ `replacement` æ˜¯ä¸ªå‡½æ•°ï¼Œå®ƒå°†è¢«è°ƒç”¨å¤šæ¬¡ã€‚

### `replaceAll`

```ts
replaceAll(pattern: string | RegExp, replacement: string | Function): string
```

> `replaceAll()` æ˜¯åœ¨ ES2021 æˆä¸ºæ ‡å‡†

å‡½æ•°ç­¾åå’Œ `replace()` ä¸€è‡´ï¼Œå…¨å±€æœç´¢ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ‰€æœ‰å­å­—ç¬¦ä¸²ï¼Œå¹¶ç”¨æ›¿æ¢é¡¹è¿›è¡Œæ›¿æ¢ï¼Œè¿”å›æ›¿æ¢åçš„å­—ç¬¦ä¸²ã€‚

å¦‚æœ `pattern` æ˜¯ `RegExp` æ—¶ï¼Œå¿…é¡»å¸¦æœ‰ global (`g`) flagï¼Œå¦åˆ™æŠ›å¼‚å¸¸ã€‚

å½“ `pattern` æ˜¯ `RegExp` æ—¶ï¼ŒåŠŸèƒ½å’Œ `replace()` ä¸€è‡´ã€‚

è¿™ä¸ªå‡½æ•°ä¸»è¦ç”¨äº `pattern` æ˜¯å­—ç¬¦ä¸²çš„æƒ…å½¢ã€‚

```javascript
const str = "aabbcc".replaceAll("b", "."); // "aa..cc"
```

å¦‚æœ `pattern` æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œåˆ™æ›¿æ¢å°†æ’å…¥åˆ°æ¯ä¸ª UTF-16 ä»£ç å•å…ƒä¹‹é—´ï¼Œç±»ä¼¼äº `split()` è¡Œä¸º

```javascript
const str = "xxx".replaceAll("", "_"); // "_x_x_x_"
```

### `match`

```ts
match(regexp: RegExp): string[] | null
```

è¿”å›ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­å­—ç¬¦ä¸²ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è¿”å› `null`ã€‚

å‚æ•°å’Œ `search()` ä¸€æ ·å¿…é¡»æ˜¯ `RegExp`ï¼Œå¦åˆ™è‡ªåŠ¨è½¬æ¢ä¸º `RegExp`ã€‚

è¿”å›å€¼å› æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦å¸¦æœ‰ global (`g`) flag è€Œå¼‚ï¼Œå¦‚æœå¸¦æœ‰ global (`g`) flagï¼Œåˆ™è¿”å›åŒ¹é…çš„å­—ç¬¦ä¸²æ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰ global (`g`) flagï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹åŠå…¶ç›¸å…³çš„æ•è·ç»„ä¿¡æ¯ï¼Œç­‰åŒäº `regexp.exec(str)`ã€‚

æœ‰ global (`g`) flag çš„æ­£åˆ™è¡¨è¾¾å¼çš„æƒ…å½¢

```javascript
const str = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
const regexp = /[A-E]/gi;
const matches = str.match(regexp);

console.log(matches);
// ['A', 'B', 'C', 'D', 'E', 'a', 'b', 'c', 'd', 'e']
```

æ²¡æœ‰ global (`g`) flag çš„æ­£åˆ™è¡¨è¾¾å¼çš„æƒ…å½¢

```javascript
const str = "For more information, see Chapter 3.4.5.1";
const re = /see (chapter \d+(\.\d)*)/i;
const found = str.match(re);

console.log(found);
// [
//   'see Chapter 3.4.5.1',
//   'Chapter 3.4.5.1',
//   '.1',
//   index: 22,
//   input: 'For more information, see Chapter 3.4.5.1',
//   groups: undefined
// ]
```

æ²¡æœ‰åŒ¹é…é¡¹ï¼Œè¿”å› `null`

```javascript
const str = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
const regexp = /[0-9]/gi;
const matches = str.match(regexp); // null
```

æ²¡æœ‰å‚æ•°æ—¶ï¼Œç›¸å½“äºè°ƒç”¨ `match(/(?:)/)`

```javascript
const str = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
const regexp = /[A-E]/gi;
const matches = str.match();

console.log(matches);
// [ 
//   '', 
//   index: 0, 
//   input: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz', 
//   groups: undefined 
// ]
```

> åŒç† `search()` æ²¡æœ‰å‚æ•°æ—¶ï¼Œè¿”å› 0ã€‚ 

### `matchAll`

```ts
matchAll(regexp: RegExp): Iterator
```

> `matchAll()` æ˜¯åœ¨ ES2020 æˆä¸ºæ ‡å‡†çš„ã€‚

å‚æ•°å¿…é¡»æ˜¯ `RegExp`ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä½¿ç”¨ `new RegExp(regexp, 'g')` è¿›è¡Œè½¬æ¢ã€‚

`regexp` å¿…é¡»å¸¦æœ‰ global (`g`) flagï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚

è¿”å›å€¼æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼‰ï¼Œè¿™ä¸ªè¿­ä»£å™¨ç”Ÿæˆçš„æ•°æ®ç±»å‹å’Œ `exec()` è¿”å›å€¼ç±»å‹ä¸€è‡´ã€‚

```javascript
const regexp = /foo[a-z]*/g;
const str = "table football, foosball";
const matches = str.matchAll(regexp);

for (const match of matches) {
  console.log(match);
}

// [ 'football', index: 6, input: 'table football, foosball', groups: undefined ]
// [ 'foosball', index: 16, input: 'table football, foosball', groups: undefined ]
```

ç­‰åŒäºè°ƒç”¨ `exec()`ï¼š

```javascript
const regexp = /foo[a-z]*/g;
const str = "table football, foosball";
let match;

while ((match = regexp.exec(str)) !== null) {
  console.log(match);
}
```

`matchAll()` å— `lastIndex` çš„å½±å“ï¼Œä½†æ˜¯ä¸ä¼šæ”¹å˜ `lastIndex` çš„å€¼ã€‚

```javascript
const regexp = /foo[a-z]*/g;
const str = "table football, foosball";
regexp.lastIndex = 10;
const matches = str.matchAll(regexp);

for (const match of matches) {
  console.log(match);
  console.log(regexp.lastIndex); // 10
}

// [ 'foosball', index: 16, input: 'table football, foosball', groups: undefined ]
```

### `split`

```ts
split(separator: string | RexExp, limit?: number): string[]
```

ä»¥åŒ¹é…é¡¹åˆ†å‰²å­—ç¬¦ä¸²ï¼Œå‚æ•° `separator` å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€… `RegExp`ï¼Œå‚æ•° `limit` å¯é€‰ï¼Œç¡®å®šåˆ†å‰²ä¹‹åè¿”å›çš„æ•°ç»„å…ƒç´ ä¸ªæ•°ã€‚

```javascript
const str = 'The quick brown  fox jumps over the lazy dog.';
const words = str.split(/\s+/);
// [ 'The', 'quick', 'brown', 'fox', 'jumps', 'over', 'the', 'lazy', 'dog.' ]

const wordsLimit = str.split(/\s+/, 3);
// [ 'The', 'quick', 'brown' ]
```

ä¸€äº›ç‰¹æ®Šæ¡ˆä¾‹ï¼š

- å½“ `limit` æ˜¯ `0` ï¼Œè¿”å› `[]`
- `"".split("")`ï¼Œä¹Ÿæ˜¯è¿”å› `[]`
- å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…é¡¹æˆ–è€… `separator` æ˜¯ `undefined` ï¼Œåˆ™è¿”å›åŒ…å«æºå­—ç¬¦ä¸²çš„æ•°ç»„
- å¦‚æœåŒ¹é…é¡¹åœ¨ç¬¬ä¸€ä¸ªæˆ–è€…æœ€åä¸€ä¸ªï¼Œåˆ™è¿”å›æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæˆ–è€…æœ€åä¸€ä¸ªæ˜¯ç©ºå­—ç¬¦ä¸²
- å¦‚æœ `separator` æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œåˆ™åŒ¹é…é¡¹æ˜¯æŒ‰ UTF-16 ä»£ç å•å…ƒè¿˜æ˜¯ Unicode ä»£ç ç‚¹æ‹†åˆ†å–å†³äºæ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦å¯è¯†åˆ« Unicode

```javascript
"ğŸ˜„ğŸ˜„".split(/(?:)/); // [ "\ud83d", "\ude04", "\ud83d", "\ude04" ]
"ğŸ˜„ğŸ˜„".split(/(?:)/u); // [ "ğŸ˜„", "ğŸ˜„" ]
```

- å¦‚æœæ­£åˆ™è¡¨è¾¾å¼é‡Œæœ‰æ•è·ç»„ï¼Œæ•è·çš„ç»„ä¼šæ‹¼æ¥åˆ°è¿”å›æ•°ç»„ä¸­

```javascript
const myString = "Hello 1 word. Sentence number 2.";
const splits = myString.split(/(\d)/);

console.log(splits);
// [ "Hello ", "1", " word. Sentence number ", "2", "." ]
```

## å·¥å…·é›†

### Regex101

[Regex101](https://regex101.com/) æ˜¯å­¦ä¹ æ­£åˆ™è¡¨è¾¾å¼æœ€æœ‰æ•ˆçš„å·¥å…·ç½‘ç«™ä¹‹ä¸€ã€‚åœ¨ "æ­£åˆ™è¡¨è¾¾å¼" æ ä¸­å¯ä»¥è¾“å…¥æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨ä¸‹é¢çš„ "æµ‹è¯•æ–‡æœ¬" æ ä¸­è¾“å…¥è¦æµ‹è¯•çš„å­—ç¬¦ä¸²ï¼Œå³å¯æ˜¾ç¤ºå‡ºåŒ¹é…åˆ°çš„ç»“æœã€‚åœ¨å³ä¾§çš„ "è§£é‡Š" åŒºåŸŸä¼šæ˜¾ç¤ºå‡ºå¯¹è¾“å…¥çš„æ­£åˆ™è¡¨è¾¾å¼çš„è¯¦ç»†è§£é‡Šï¼Œ"åŒ¹é…ä¿¡æ¯" æ˜¾ç¤ºåŒ¹é…çš„ç»“æœï¼Œå³ä¸‹è§’çš„ "å¿«é€Ÿå‚è€ƒ"  æ ä¼šæ˜¾ç¤ºæ­£åˆ™è¡¨è¾¾å¼é€ŸæŸ¥è¡¨ã€‚

è¿˜å¯ä»¥åœ¨ä¸Šé¢ç»ƒä¹ ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼å’Œæœç´¢åˆ«äººå†™çš„æ¯”è¾ƒå¥½çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚

![](./assets/regexp-regexp101.png)

ç±»ä¼¼çš„è¿˜æœ‰ [RegExr](https://regexr.com/)ã€‚

### Regex-Vis

[Regex-Vis](https://regex-vis.com/) æ˜¯ä¸€ä¸ªè¾…åŠ©å­¦ä¹ ã€ç¼–å†™å’ŒéªŒè¯æ­£åˆ™çš„å·¥å…·ã€‚å®ƒä¸ä»…èƒ½å¯¹æ­£åˆ™è¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼Œè€Œä¸”æä¾›å¯è§†ç¼–è¾‘æ­£åˆ™çš„èƒ½åŠ›ã€‚åœ¨è¾“å…¥ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åï¼Œä¼šç”Ÿæˆå®ƒçš„å¯è§†åŒ–å›¾å½¢ã€‚ç„¶åå¯ä»¥ç‚¹é€‰æˆ–æ¡†é€‰å›¾å½¢ä¸­çš„å•ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ï¼Œå†åœ¨å³ä¾§æ“ä½œé¢æ¿å¯¹å…¶è¿›è¡Œæ“ä½œã€‚

![regexp-regex-vis](./assets/regexp-regex-vis.png)

### Regex Previewer

[Regex Previewer](https://marketplace.visualstudio.com/items?itemName=chrmarti.regex) æ˜¯ä¸€ä¸ª VScode æ’ä»¶ã€‚å½“æˆ‘ä»¬åœ¨ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¿«æ·é”® `Ctrl + Alt + M` (Windows) æˆ–è€… `âŒ¥ + âŒ˜ + M` (Mac) åœ¨ç¼–è¾‘å™¨å³ä¾§å¯åŠ¨ä¸€ä¸ªæ ‡ç­¾é¡µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ ‡ç­¾é¡µå†™ä¸€å†™æµ‹è¯•ç”¨ä¾‹ï¼Œç”¨æ¥æµ‹è¯•æˆ‘ä»¬å†™çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚

![](./assets/regexp-regex-previewer.gif)

### RegexLearn

[RegexLearn](https://regexlearn.com/) æ˜¯ä¸€ä¸ªäº¤äº’å¼åœ°å­¦ä¹ æ­£åˆ™è¡¨è¾¾å¼çš„ç½‘ç«™ï¼Œä¸€æ­¥ä¸€æ­¥æ•™ä½ å¦‚ä½•å†™æ­£åˆ™è¡¨è¾¾å¼ã€‚ç±»ä¼¼çš„è¿˜æœ‰ [RegexOne](https://regexone.com/)ã€‚

![](./assets/regexp-regex-learn.png)

## å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼

ä¸‹é¢åˆ—ä¸¾ä¸€äº›å¹³æ—¶å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚

### é‡‘é¢åƒåˆ†ä½åˆ†å‰²

```javascript
const formatMoney = (money) => {
  const reg = new RegExp(`(?!^)(?=(\\d{3})+${money.includes('.') ? '\\.' : '$'})`, 'g')
  return money.replace(reg, ',')  
}
```

### å¯†ç å¼ºæ ¡éªŒ

å¿…é¡»æœ‰ä¸”åªèƒ½ç”±æ•°å­—ã€å¤§å†™å­—ç¬¦ã€å°å†™å­—ç¬¦ã€ç‰¹æ®Šå­—ç¬¦ç»„æˆï¼Œé•¿åº¦ 8~16 ä½

```javascript
/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\p{P}\p{S}])[0-9A-Za-z\p{P}\p{S}]{8,16}$/u
```

å¦‚æœä¸æ”¯æŒ Unicode å¯ä»¥è¿™æ ·ï¼š

```javascript
/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z0-9\s])[^\s]{8,16}$/
```

ä¸Šé¢æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„**ç‰¹æ®Šå­—ç¬¦**æ˜¯é™¤æ•°å­—ã€å¤§å†™å­—ç¬¦ã€å°å†™å­—ç¬¦ã€ä»»æ„ç©ºç™½ç¬¦ä¹‹å¤–çš„ä»»æ„å­—ç¬¦ï¼ˆæ¯”å¦‚ä¸­æ–‡ç­‰ï¼‰

### åªæ”¯æŒè‹±è¯­å­—æ¯ã€æ•°å­—ã€è‹±è¯­ç¬¦å·

```js
/^[A-Za-z0-9 !"#$%&'()*+,-./:;<=>?@[\\\]^_`{|}~]*$/
```

### æ‰‹æœºå·ç 

```js
/^1[3|4|5|6|7|8|9][0-9]\d{8}$/
```

### æ•°å­—

```js
/^-?((0(\.0*[1-9]\d*)?)|([1-9]\d*(\.\d+)?))$/
```

## References

- [RegexLearn](https://regexlearn.com/)
- [RegexOne](https://regexone.com/)
- [Learn-regex](https://github.com/ziishaned/learn-regex)
- [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp)
- [Regular expressions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_expressions)
- [Regular expression syntax cheat sheet](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_expressions/Cheatsheet)
- [æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹](https://www.jb51.net/tools/zhengze.html)
- [æ­£åˆ™è¡¨è¾¾å¼ä¸ç”¨èƒŒ](https://mp.weixin.qq.com/s/S27FTJyKoVJoY7tcEgLo8Q)
- [JavaScript æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ±‰å­—](https://zhuanlan.zhihu.com/p/33335629)
- [Unicode character class escape](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Regular_expressions/Unicode_character_class_escape)
- [Regex101](https://regex101.com/)
- [RegExr](https://regexr.com/)
- [Regex Tester](https://extendsclass.com/regex-tester.html#)
- [Regex-Vis](https://regex-vis.com/)
- [Regex Previewer](https://marketplace.visualstudio.com/items?itemName=chrmarti.regex)
- [RegExp `v` flag with set notation and properties of strings](https://v8.dev/features/regexp-v-flag)
- [Unicode Regular Expressions](https://www.unicode.org/reports/tr18/)
- [Unicode Character Database](https://unicode.org/reports/tr44/)
- [`Unified_Ideograph`](https://unicode.org/reports/tr44/#Unified_Ideograph)
- [Unicode](https://www.Unicode.org/versions/Unicode15.0.0/)
- [Text Processing](https://tc39.es/ecma262/multipage/text-processing.html#table-binary-Unicode-properties)
