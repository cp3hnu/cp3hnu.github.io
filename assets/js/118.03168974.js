(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{573:function(t,a,s){"use strict";s.r(a);var e=s(4),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_410-creating-swift-packages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_410-creating-swift-packages"}},[t._v("#")]),t._v(" 410-Creating Swift Packages")]),t._v(" "),s("h2",{attrs:{id:"overview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[t._v("#")]),t._v(" Overview")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#creating-local-packages"}},[t._v("Creating local packages")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#publishing-packages"}},[t._v("Publishing packages")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#package-manifest-api"}},[t._v("Package manifest API")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#editing-packages"}},[t._v("Editing packages")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#open-source-project"}},[t._v("Open source project")])])]),t._v(" "),s("h2",{attrs:{id:"creating-local-packages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#creating-local-packages"}},[t._v("#")]),t._v(" Creating local packages")]),t._v(" "),s("p",[t._v("File -> New -> Swift Package，创建 local package, 然后添加 code, 在 Target -> General -> Framework, Libraries, and Embedded Content 中添加创建的 library")]),t._v(" "),s("p",[t._v("Local package 具有以下特点")]),t._v(" "),s("ul",[s("li",[t._v("Can be thought of as sub-projects in a Xcode workspace")]),t._v(" "),s("li",[t._v("Platform independent")]),t._v(" "),s("li",[t._v("Great for refactoring out reusable code")]),t._v(" "),s("li",[t._v("Not versioned")]),t._v(" "),s("li",[t._v("Can publish and share with others later")])]),t._v(" "),s("h2",{attrs:{id:"publishing-packages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#publishing-packages"}},[t._v("#")]),t._v(" Publishing packages")]),t._v(" "),s("p",[t._v("版本号遵循 "),s("a",{attrs:{href:"https://semver.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Semantic Versioning"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("Major version zero is a special case which you can use during initial development. Changes to minor and patch versions can also break API.")]),t._v(" "),s("p",[t._v("You can use prerelease versions to ask your clients to test APIs before you make the final release for a version. For example, 2.0.0-beta.1")]),t._v(" "),s("p",[t._v("编写 README 文档，修改 Package.swift 文件，具体语法 "),s("a",{attrs:{href:"#package-manifest-api"}},[t._v("Package manifest API")]),t._v("，然后把创建的 local package push  to GitHub 或者其它 Xcode 支持的代码管理仓库。")]),t._v(" "),s("h2",{attrs:{id:"package-manifest-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#package-manifest-api"}},[t._v("#")]),t._v(" Package manifest API")]),t._v(" "),s("p",[t._v("Package.swift")]),t._v(" "),s("div",{staticClass:"language-swift line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// swift-tools-version:5.1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("PackageDescription")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" package "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Package")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyLibrary"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    products"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("library")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyLibrary"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" targets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyLibrary"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    dependencies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("package")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://github.com/ReactiveX/RxSwift.git"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("upToNextMajor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5.0.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    targets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("target")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyLibrary"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dependencies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("testTarget")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyLibraryTests"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dependencies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyLibrary"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("h4",{attrs:{id:"swift-tools-version-5-1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#swift-tools-version-5-1"}},[t._v("#")]),t._v(" swift-tools-version: 5.1")]),t._v(" "),s("p",[t._v("The swift-tools-version declares the minimum version of Swift required to build this package.")]),t._v(" "),s("p",[t._v("Xcode ensures that the Swift Tools version of all of your package dependencies are always compatible with Tools version of your package.")]),t._v(" "),s("h4",{attrs:{id:"name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#name"}},[t._v("#")]),t._v(" name")]),t._v(" "),s("p",[t._v("The name of the Swift package.")]),t._v(" "),s("h4",{attrs:{id:"products"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#products"}},[t._v("#")]),t._v(" products")]),t._v(" "),s("p",[t._v("Products are used to export target from a package so other packages can use them.")]),t._v(" "),s("h4",{attrs:{id:"dependencies"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dependencies"}},[t._v("#")]),t._v(" dependencies")]),t._v(" "),s("p",[t._v("Declare other packages that this package depends on.")]),t._v(" "),s("h4",{attrs:{id:"targets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#targets"}},[t._v("#")]),t._v(" targets")]),t._v(" "),s("blockquote",[s("p",[t._v("注意：这里的 target 跟 Project 里的 target 没有关系")])]),t._v(" "),s("p",[t._v("Targets are the basic building blocks of a package. A target can define a module or a test suite.")]),t._v(" "),s("p",[t._v('Library Targets are under "source" directory and each target should have its own subdirectory.')]),t._v(" "),s("p",[t._v('Test targets are under a "Tests" directory, and they also have their own subdirectory.')]),t._v(" "),s("p",[t._v("Targets can depend on other targets in this package, and on products in packages which this package depends on.")]),t._v(" "),s("p",[t._v("target 中有个 "),s("code",[t._v("path")]),t._v(" 参数，指定 target 的路径，其实就是代码的路径，默认是"),s("code",[t._v("[PackageRoot]/Sources/[TargetName]")]),t._v(" ，你也可以自己指定一个路径。")]),t._v(" "),s("h4",{attrs:{id:"platforms"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#platforms"}},[t._v("#")]),t._v(" platforms")]),t._v(" "),s("p",[t._v("Predefined minimum deployment version")]),t._v(" "),s("ul",[s("li",[t._v("macOS 10.10")]),t._v(" "),s("li",[t._v("iOS 8.0")]),t._v(" "),s("li",[t._v("tvOS 9.0")]),t._v(" "),s("li",[t._v("watchOS 2.0")])]),t._v(" "),s("p",[t._v("A platform that the Swift package supports")]),t._v(" "),s("div",{staticClass:"language-swift line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[t._v("platforms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("macOS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("v10_15"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("iOS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("v13"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" or \nplatforms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("macOS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10.15"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("iOS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"13"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h4",{attrs:{id:"swiftlanguageversions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#swiftlanguageversions"}},[t._v("#")]),t._v(" swiftLanguageVersions")]),t._v(" "),s("p",[t._v("The list of Swift versions that this package is compatible with")]),t._v(" "),s("div",{staticClass:"language-swift line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[t._v("swiftLanguageVersions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("v4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("v5"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"adding-support-in-existing-projects"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adding-support-in-existing-projects"}},[t._v("#")]),t._v(" Adding support in existing projects")]),t._v(" "),s("p",[t._v("添加并按要求编写 Package.swift，重要的一点，指定 target path, 就可以支持 Swift Packages 包管理了")]),t._v(" "),s("h2",{attrs:{id:"editing-packages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#editing-packages"}},[t._v("#")]),t._v(" Editing packages")]),t._v(" "),s("p",[t._v("Local package and standalone package can be edit.")]),t._v(" "),s("p",[t._v("But, package dependencies are locked for editing, because they're automatically managed by Xcode.")]),t._v(" "),s("h2",{attrs:{id:"open-source-project"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#open-source-project"}},[t._v("#")]),t._v(" Open source project")]),t._v(" "),s("p",[t._v("Swift PM consists of four command line tools")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("swift build")]),t._v(", build a package.")]),t._v(" "),s("li",[s("code",[t._v("swift run,")]),t._v(" run the executable products.")]),t._v(" "),s("li",[s("code",[t._v("swift test")]),t._v(", run tests.")]),t._v(" "),s("li",[s("code",[t._v("swift package")]),t._v(", perform various nonbuild operations on the package.")])]),t._v(" "),s("p",[t._v("You can also use "),s("code",[t._v("xcodebuild")]),t._v(" to build packages on the command line or on CI.")]),t._v(" "),s("p",[t._v("Swift package support in Xcode is built on top of the libSwiftPM library, and SourceKit-LSP was built on top of the open source libSwiftPM.")]),t._v(" "),s("h3",{attrs:{id:"links"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#links"}},[t._v("#")]),t._v(" Links")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://swift.org/package-manager/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Swift Package Manager Guide"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.swift.org/package-manager/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Swift Package Manager Document"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"github.com/apple/swift-evolution"}},[t._v("Swift Evolution")])]),t._v(" "),s("h3",{attrs:{id:"期望"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#期望"}},[t._v("#")]),t._v(" 期望")]),t._v(" "),s("p",[t._v("Swift packages currently only supports source code and unit tests. We're looking forward to add support for resources such as images, text files, or other data files.")])])}),[],!1,null,null,null);a.default=n.exports}}]);