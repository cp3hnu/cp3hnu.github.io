<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Blog 集成 Algolia DocSearch | Study &amp; Product</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="在本博客网站上集成 Algolia DocSearch，以便对博客的内容进行更好的搜索。">
    <meta name="algolia-site-verification" content="23333450F18E92C1">
    
    <link rel="preload" href="/assets/css/0.styles.cd1f7b12.css" as="style"><link rel="preload" href="/assets/js/app.b07256e7.js" as="script"><link rel="preload" href="/assets/js/34.49b71b2c.js" as="script"><link rel="preload" href="/assets/js/3.276926dd.js" as="script"><link rel="preload" href="/assets/js/12.8da07182.js" as="script"><link rel="prefetch" href="/assets/js/10.7c5bc6fc.js"><link rel="prefetch" href="/assets/js/100.f675d046.js"><link rel="prefetch" href="/assets/js/101.92ede1ec.js"><link rel="prefetch" href="/assets/js/102.678a907d.js"><link rel="prefetch" href="/assets/js/103.959ad108.js"><link rel="prefetch" href="/assets/js/104.b15677eb.js"><link rel="prefetch" href="/assets/js/105.377da8a5.js"><link rel="prefetch" href="/assets/js/106.29a8c44d.js"><link rel="prefetch" href="/assets/js/107.64b19904.js"><link rel="prefetch" href="/assets/js/108.a3e75a67.js"><link rel="prefetch" href="/assets/js/109.283d92d8.js"><link rel="prefetch" href="/assets/js/11.e6a0311f.js"><link rel="prefetch" href="/assets/js/110.cbb6ea81.js"><link rel="prefetch" href="/assets/js/111.252f143f.js"><link rel="prefetch" href="/assets/js/112.df62c9fe.js"><link rel="prefetch" href="/assets/js/113.66189350.js"><link rel="prefetch" href="/assets/js/114.890cd7de.js"><link rel="prefetch" href="/assets/js/115.53823707.js"><link rel="prefetch" href="/assets/js/116.caaa6eaa.js"><link rel="prefetch" href="/assets/js/117.b7b0f88f.js"><link rel="prefetch" href="/assets/js/118.03168974.js"><link rel="prefetch" href="/assets/js/119.90f4d7b7.js"><link rel="prefetch" href="/assets/js/120.b654e5ee.js"><link rel="prefetch" href="/assets/js/121.92d87086.js"><link rel="prefetch" href="/assets/js/13.a9f90626.js"><link rel="prefetch" href="/assets/js/14.b18d5210.js"><link rel="prefetch" href="/assets/js/15.835c7671.js"><link rel="prefetch" href="/assets/js/16.eb29ed80.js"><link rel="prefetch" href="/assets/js/17.c4871518.js"><link rel="prefetch" href="/assets/js/18.606b879c.js"><link rel="prefetch" href="/assets/js/19.777086a8.js"><link rel="prefetch" href="/assets/js/20.c8e69fcc.js"><link rel="prefetch" href="/assets/js/21.6cda2658.js"><link rel="prefetch" href="/assets/js/22.19e356e1.js"><link rel="prefetch" href="/assets/js/23.ca8661ea.js"><link rel="prefetch" href="/assets/js/24.9f090eaf.js"><link rel="prefetch" href="/assets/js/25.be2c8a0c.js"><link rel="prefetch" href="/assets/js/26.5ce52eaa.js"><link rel="prefetch" href="/assets/js/27.d75e1151.js"><link rel="prefetch" href="/assets/js/28.6863d7e4.js"><link rel="prefetch" href="/assets/js/29.d8a1c4f2.js"><link rel="prefetch" href="/assets/js/30.178b8dc0.js"><link rel="prefetch" href="/assets/js/31.4c488d0e.js"><link rel="prefetch" href="/assets/js/32.ce3ae3c7.js"><link rel="prefetch" href="/assets/js/33.828dd0d1.js"><link rel="prefetch" href="/assets/js/35.9496ed4c.js"><link rel="prefetch" href="/assets/js/36.33ada8e1.js"><link rel="prefetch" href="/assets/js/37.e9705ffe.js"><link rel="prefetch" href="/assets/js/38.f9c57096.js"><link rel="prefetch" href="/assets/js/39.75b77f83.js"><link rel="prefetch" href="/assets/js/4.c651aa9d.js"><link rel="prefetch" href="/assets/js/40.4496a5db.js"><link rel="prefetch" href="/assets/js/41.260393e3.js"><link rel="prefetch" href="/assets/js/42.083f9350.js"><link rel="prefetch" href="/assets/js/43.8d311a8e.js"><link rel="prefetch" href="/assets/js/44.df55763b.js"><link rel="prefetch" href="/assets/js/45.e19037c7.js"><link rel="prefetch" href="/assets/js/46.9529f37b.js"><link rel="prefetch" href="/assets/js/47.8d631e39.js"><link rel="prefetch" href="/assets/js/48.3acad59c.js"><link rel="prefetch" href="/assets/js/49.9a12a900.js"><link rel="prefetch" href="/assets/js/5.373c53f3.js"><link rel="prefetch" href="/assets/js/50.f30877b8.js"><link rel="prefetch" href="/assets/js/51.e8b2adf9.js"><link rel="prefetch" href="/assets/js/52.e6a458bb.js"><link rel="prefetch" href="/assets/js/53.e4027d0c.js"><link rel="prefetch" href="/assets/js/54.5a4be38d.js"><link rel="prefetch" href="/assets/js/55.924ee4f8.js"><link rel="prefetch" href="/assets/js/56.11ff1ccf.js"><link rel="prefetch" href="/assets/js/57.14327960.js"><link rel="prefetch" href="/assets/js/58.cea182b0.js"><link rel="prefetch" href="/assets/js/59.2db874c7.js"><link rel="prefetch" href="/assets/js/6.6878fac4.js"><link rel="prefetch" href="/assets/js/60.e3e4017b.js"><link rel="prefetch" href="/assets/js/61.d5cd385e.js"><link rel="prefetch" href="/assets/js/62.6929f93f.js"><link rel="prefetch" href="/assets/js/63.3f8bf719.js"><link rel="prefetch" href="/assets/js/64.e89e1572.js"><link rel="prefetch" href="/assets/js/65.a4335c65.js"><link rel="prefetch" href="/assets/js/66.cc9fb484.js"><link rel="prefetch" href="/assets/js/67.d5da8f2f.js"><link rel="prefetch" href="/assets/js/68.91a38f6d.js"><link rel="prefetch" href="/assets/js/69.800ca600.js"><link rel="prefetch" href="/assets/js/7.6f2558ea.js"><link rel="prefetch" href="/assets/js/70.f7b16ee7.js"><link rel="prefetch" href="/assets/js/71.e34929dc.js"><link rel="prefetch" href="/assets/js/72.175a64bf.js"><link rel="prefetch" href="/assets/js/73.c3dcfd4b.js"><link rel="prefetch" href="/assets/js/74.65978082.js"><link rel="prefetch" href="/assets/js/75.718d5152.js"><link rel="prefetch" href="/assets/js/76.2ed620b3.js"><link rel="prefetch" href="/assets/js/77.f8726387.js"><link rel="prefetch" href="/assets/js/78.1dea2e59.js"><link rel="prefetch" href="/assets/js/79.f62213a1.js"><link rel="prefetch" href="/assets/js/8.81ebcef8.js"><link rel="prefetch" href="/assets/js/80.7600ac29.js"><link rel="prefetch" href="/assets/js/81.ab94746f.js"><link rel="prefetch" href="/assets/js/82.26baf7f8.js"><link rel="prefetch" href="/assets/js/83.89a3942a.js"><link rel="prefetch" href="/assets/js/84.1a5577ac.js"><link rel="prefetch" href="/assets/js/85.eb62de22.js"><link rel="prefetch" href="/assets/js/86.7635121c.js"><link rel="prefetch" href="/assets/js/87.5bee4d72.js"><link rel="prefetch" href="/assets/js/88.04d56860.js"><link rel="prefetch" href="/assets/js/89.09a7d920.js"><link rel="prefetch" href="/assets/js/9.7f69b9b1.js"><link rel="prefetch" href="/assets/js/90.dac6a66e.js"><link rel="prefetch" href="/assets/js/91.14f101dd.js"><link rel="prefetch" href="/assets/js/92.d398eb09.js"><link rel="prefetch" href="/assets/js/93.7a5477fa.js"><link rel="prefetch" href="/assets/js/94.c4bf7674.js"><link rel="prefetch" href="/assets/js/95.a0c3c94c.js"><link rel="prefetch" href="/assets/js/96.c3a44db5.js"><link rel="prefetch" href="/assets/js/97.6956ed39.js"><link rel="prefetch" href="/assets/js/98.ad65fe08.js"><link rel="prefetch" href="/assets/js/99.4fe76e2f.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.cb5d1302.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cd1f7b12.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">Study &amp; Product </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Home</a></li><li class="nav-item"><a href="/blog/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/notebook/" class="nav-link">Notebook</a></li><li class="nav-item"><a href="/about/" class="nav-link">About</a></li><li class="nav-item"><a href="https://github.com/cp3hnu" target="_blank" rel="noopener noreferrer" class="nav-link external">GitHub</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">Study &amp; Product </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Home</a></li><li class="mobile-nav-item"><a href="/blog/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/notebook/" class="nav-link">Notebook</a></li><li class="mobile-nav-item"><a href="/about/" class="nav-link">About</a></li><li class="mobile-nav-item"><a href="https://github.com/cp3hnu" target="_blank" rel="noopener noreferrer" class="nav-link external">GitHub</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper blog-page"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><div itemprop="articleBody" class="content__default"><h1 id="blog-集成-algolia-docsearch"><a href="#blog-集成-algolia-docsearch" class="header-anchor">#</a> Blog 集成 Algolia DocSearch</h1> <p>我们在浏览技术网站的时候，发现现在很多的技术网站（比如：Vue、React、Vite）都使用了 <a href="https://github.com/algolia/docsearch" target="_blank" rel="noopener noreferrer">Algolia DocSearch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 对他们提供的内容进行搜索。今天我打算在本博客网站上也集成 Algolia DocSearch，以便对博客内容进行更好的搜索（以前只能搜索文章标题）。</p> <p>本博客于 2019年使用 <a href="https://v1.vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">VuePress v1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> + <a href="https://v1.vuepress.vuejs.org/zh/theme/blog-theme.html" target="_blank" rel="noopener noreferrer">博客主题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 搭建的。因为该 <a href="https://github.com/vuepress/vuepress-theme-blog" target="_blank" rel="noopener noreferrer">博客主题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 一直没有升级以支持 VuePress v2 以及之后的 <a href="https://vitepress.dev/" target="_blank" rel="noopener noreferrer">VitePress<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，而我也非常喜欢该主题的风格，因此也没有升级到 VuePress v2。以后打算改用 <a href="https://vitepress.dev/" target="_blank" rel="noopener noreferrer">VitePress<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 或者 <a href="https://astro.build/" target="_blank" rel="noopener noreferrer">Astro<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>通过查看 <a href="https://github.com/algolia/docsearch" target="_blank" rel="noopener noreferrer">Algolia DocSearch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的 GitHub 文档，我原以为只需 1~2 个小时就能集成 Algolia DocSearch，结果花了我一整个周末才搞定。实现的过程中也踩了不少的坑，因此想通过这篇文章记录下来。</p> <p>实现的最终效果如下：</p> <p><img src="/assets/img/doc-search-result.8ee30137.png" alt=""></p> <h2 id="接入-docsearch"><a href="#接入-docsearch" class="header-anchor">#</a> 接入 DocSearch</h2> <blockquote><p><a href="https://v1.vuepress.vuejs.org/zh/theme/default-theme-config.html#algolia-%E6%90%9C%E7%B4%A2" target="_blank" rel="noopener noreferrer">VuePress v1 的默认主题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 已经集成了 Algolia DocSearch，但是 <a href="https://github.com/vuepress/vuepress-theme-blog" target="_blank" rel="noopener noreferrer">博客主题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 不支持，需要自己手动配置。</p></blockquote> <p>根据 <a href="https://github.com/algolia/docsearch" target="_blank" rel="noopener noreferrer">Algolia DocSearch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的 GitHub 文档，接入 DocSearch 很简单</p> <ol><li>安装 DocSearch</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ <span class="token function">npm</span> <span class="token function">install</span> @docsearch/js@3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>创建 <a href="https://docsearch.algolia.com/apply" target="_blank" rel="noopener noreferrer">Algolia DocSearch 项目<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>添加 DocSearch 挂载的容器</li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>docsearch<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>在项目入口添加一段脚本</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> docsearch <span class="token keyword">from</span> <span class="token string">'@docsearch/js'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string">'@docsearch/css'</span><span class="token punctuation">;</span>

<span class="token function">docsearch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  container<span class="token operator">:</span> <span class="token string">'#docsearch'</span><span class="token punctuation">,</span>
  appId<span class="token operator">:</span> <span class="token string">'YOUR_APP_ID'</span><span class="token punctuation">,</span>
  indexName<span class="token operator">:</span> <span class="token string">'YOUR_INDEX_NAME'</span><span class="token punctuation">,</span>
  apiKey<span class="token operator">:</span> <span class="token string">'YOUR_SEARCH_API_KEY'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>appId</code> 和 <code>apiKey</code> 在刚才创建的 Algolia DocSearch 项目中可以找到</p> <p><code>container</code> 就是 DocSearch 挂载的容器，支持 CSS 选择器或者Element 元素。</p> <p><code>indexName</code> 是什么？文档中没有说明，即便是 <a href="https://docsearch.algolia.com/docs/api#indexname" target="_blank" rel="noopener noreferrer">DocSearch 官方文档 <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>也只有简单的描述</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Your Algolia index name.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>先不管了，空着。</p> <p>回到我们的博客，界面上已经有了 DocSearch。但是搜索没有数据。</p> <p><img src="/assets/img/doc-search-component.ed4bde7c.png" alt=""></p> <h2 id="crawler"><a href="#crawler" class="header-anchor">#</a> Crawler</h2> <h3 id="indexname"><a href="#indexname" class="header-anchor">#</a> <code>indexName</code></h3> <p>没有查询到数据的根源就在于没有设置 <code>indexName</code> 参数。那 <code>indexName</code> 参数究竟代表什么？</p> <p>其实 <code>indexName</code> 就是你的网站内容索引数据库。就像后台 API 需要从数据库里获取数据一样，DocSearch 也是需要从索引数据库里检索数据。那这个数据库从何而来？DocSearch 通过 Crawler 抓取您的网页内容，生成索引数据库。</p> <h3 id="创建-crawler"><a href="#创建-crawler" class="header-anchor">#</a> 创建 Crawler</h3> <p>去到项目的<a href="https://dashboard.algolia.com/" target="_blank" rel="noopener noreferrer">工作台<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，点击 &quot;Go To Crawler&quot;，创建一个 Crawler</p> <p><img src="/assets/img/doc-search-dashboard.a9e21019.png" alt=""></p> <p>首先添加您网站的域名，并进行认证（需要证明是您的网站），Algolia 提供了四种认证方式：</p> <ul><li><code>Meta Tag</code></li> <li><code>HTML file</code></li> <li><code>Robots.txt</code></li> <li><code>DNS</code></li></ul> <p>如果我们能控制源代码，最简单的方式是使用 <code>Meta Tag</code>。</p> <p><img src="/assets/img/doc-search-auth-meta-tag.d8da11b7.png" alt=""></p> <p>添加上面的代码到 HMTL Head 标签下，点击 &quot;Verify Now&quot;。当认证通过后，就可以创建 Crawler。</p> <p><img src="/assets/img/doc-search-create-crawler.0acc7805.png" alt=""></p> <p>输入 <code>Crawler name</code> 和 <code>Start URL</code>，然后选择网页内容类型，这里我选择 &quot;Technical documentation&quot;。对于这个类型，DocSearch 提供了几种 <a href="https://docsearch.algolia.com/docs/templates" target="_blank" rel="noopener noreferrer">模版<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 可供选择，我选择 &quot;VuePress v1&quot; 。如果选错了，也没有关系，后面还可以手动修改 Crawler 的配置。</p> <p>创建好了之后，他会运行测试 crawl，测试 crawl 最多访问 100 个 URL。运行成功后您可以看到一个统计页面（访问了多少了页面，生成了多少个记录），并且生成了一个 <code>index</code>。</p> <p><img src="/assets/img/doc-search-index.cd678a48.png" alt=""></p> <p>这个就是要填写的 <code>indexName</code> 参数。</p> <p>将这个值填写到 JS 代码里，运行程序，开始搜索。没有搜索到结果，并且控制台报错：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Uncaught (in promise) TypeError: Cannot read properties of undefined (reading 'lvl0')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>出错原因是索引（Index）数据库里的数据没有返回 <strong>hierarchy</strong> 字段，导致读取 <strong>hierarchy.lvl0</strong> 时报错。根本原因可能是我在创建 Crawrler 时，网页内容类型（What types of content do you want to crawl?）选择了 &quot;General web pages&quot;。如果您和我一样也选错了类型，不要慌，我们还可以手动修改 Crawler 配置。</p> <h2 id="手动配置-crawler"><a href="#手动配置-crawler" class="header-anchor">#</a> 手动配置 Crawler</h2> <p>进入 Crawler 页面，选择 &quot;Configuration&quot; 进行可视化配置，选择 &quot;Editor&quot; 进行代码配置。我们直接选择代码配置，他的功能更全。复制 <a href="https://docsearch.algolia.com/docs/templates#vuepress-v1-template" target="_blank" rel="noopener noreferrer">Vuepress v1 Template<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的配置到 Editor。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Crawler</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  appId<span class="token operator">:</span> <span class="token string">'YOUR_APP_ID'</span><span class="token punctuation">,</span>
  apiKey<span class="token operator">:</span> <span class="token string">'YOUR_API_KEY'</span><span class="token punctuation">,</span>
  rateLimit<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
  maxDepth<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  schedule<span class="token operator">:</span> <span class="token string">&quot;on the 2 day of the month&quot;</span><span class="token punctuation">,</span>
  startUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'https://cp3hnu.github.io/'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  sitemaps<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'https://YOUR_WEBSITE_URL/sitemap.xml'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  discoveryPatterns<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'https://YOUR_WEBSITE_URL/**'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      indexName<span class="token operator">:</span> <span class="token string">'cp3hnu_github_io_du4vgyodoq_pages'</span><span class="token punctuation">,</span>
      pathsToMatch<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'https://cp3hnu.github.io/**'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token function-variable function">recordExtractor</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> $<span class="token punctuation">,</span> helpers <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> helpers<span class="token punctuation">.</span><span class="token function">docsearch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          recordProps<span class="token operator">:</span> <span class="token punctuation">{</span>
            lvl0<span class="token operator">:</span> <span class="token punctuation">{</span>
              selectors<span class="token operator">:</span> <span class="token string">'p.sidebar-heading.open'</span><span class="token punctuation">,</span>
              defaultValue<span class="token operator">:</span> <span class="token string">'Documentation'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            lvl1<span class="token operator">:</span> <span class="token string">'.content__default h1'</span><span class="token punctuation">,</span>
            lvl2<span class="token operator">:</span> <span class="token string">'.content__default h2'</span><span class="token punctuation">,</span>
            lvl3<span class="token operator">:</span> <span class="token string">'.content__default h3'</span><span class="token punctuation">,</span>
            lvl4<span class="token operator">:</span> <span class="token string">'.content__default h4'</span><span class="token punctuation">,</span>
            lvl5<span class="token operator">:</span> <span class="token string">'.content__default h5'</span><span class="token punctuation">,</span>
            content<span class="token operator">:</span> <span class="token string">'.content__default p, .content__default li'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          indexHeadings<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          aggregateContent<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  initialIndexSettings<span class="token operator">:</span> <span class="token punctuation">{</span>
    cp3hnu_github_io_du4vgyodoq_pages<span class="token operator">:</span> <span class="token punctuation">{</span>
      attributesForFaceting<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">,</span> <span class="token string">'lang'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      attributesToRetrieve<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'hierarchy'</span><span class="token punctuation">,</span> <span class="token string">'content'</span><span class="token punctuation">,</span> <span class="token string">'anchor'</span><span class="token punctuation">,</span> <span class="token string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      attributesToHighlight<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'hierarchy'</span><span class="token punctuation">,</span> <span class="token string">'hierarchy_camel'</span><span class="token punctuation">,</span> <span class="token string">'content'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      attributesToSnippet<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'content:10'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      camelCaseAttributes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'hierarchy'</span><span class="token punctuation">,</span> <span class="token string">'hierarchy_radio'</span><span class="token punctuation">,</span> <span class="token string">'content'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      searchableAttributes<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'unordered(hierarchy_radio_camel.lvl0)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_radio.lvl0)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_radio_camel.lvl1)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_radio.lvl1)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_radio_camel.lvl2)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_radio.lvl2)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_radio_camel.lvl3)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_radio.lvl3)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_radio_camel.lvl4)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_radio.lvl4)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_radio_camel.lvl5)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_radio.lvl5)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_radio_camel.lvl6)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_radio.lvl6)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_camel.lvl0)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy.lvl0)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_camel.lvl1)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy.lvl1)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_camel.lvl2)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy.lvl2)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_camel.lvl3)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy.lvl3)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_camel.lvl4)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy.lvl4)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_camel.lvl5)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy.lvl5)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy_camel.lvl6)'</span><span class="token punctuation">,</span>
        <span class="token string">'unordered(hierarchy.lvl6)'</span><span class="token punctuation">,</span>
        <span class="token string">'content'</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      distinct<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      attributeForDistinct<span class="token operator">:</span> <span class="token string">'url'</span><span class="token punctuation">,</span>
      customRanking<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'desc(weight.pageRank)'</span><span class="token punctuation">,</span>
        <span class="token string">'desc(weight.level)'</span><span class="token punctuation">,</span>
        <span class="token string">'asc(weight.position)'</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      ranking<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'words'</span><span class="token punctuation">,</span>
        <span class="token string">'filters'</span><span class="token punctuation">,</span>
        <span class="token string">'typo'</span><span class="token punctuation">,</span>
        <span class="token string">'attribute'</span><span class="token punctuation">,</span>
        <span class="token string">'proximity'</span><span class="token punctuation">,</span>
        <span class="token string">'exact'</span><span class="token punctuation">,</span>
        <span class="token string">'custom'</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      highlightPreTag<span class="token operator">:</span> <span class="token string">'&lt;span class=&quot;algolia-docsearch-suggestion--highlight&quot;&gt;'</span><span class="token punctuation">,</span>
      highlightPostTag<span class="token operator">:</span> <span class="token string">'&lt;/span&gt;'</span><span class="token punctuation">,</span>
      minWordSizefor1Typo<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      minWordSizefor2Typos<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      allowTyposOnNumericTokens<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      minProximity<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      ignorePlurals<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      advancedSyntax<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      attributeCriteriaComputedByMinProximity<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      removeWordsIfNoResults<span class="token operator">:</span> <span class="token string">'allOptional'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br></div></div><h3 id="crawler-的配置项"><a href="#crawler-的配置项" class="header-anchor">#</a> Crawler 的配置项</h3> <p>Crawler 的配置项比较多，完整列表请参考 <a href="https://www.algolia.com/doc/tools/crawler/apis/configuration/" target="_blank" rel="noopener noreferrer">Crawler Configuration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。这里讲解几个比较重要的。</p> <h4 id="starturls"><a href="#starturls" class="header-anchor">#</a> <code>startUrls</code></h4> <p>Crawler 的入口 URLs，一般设置为您网站的域名。</p> <h4 id="discoverypatterns"><a href="#discoverypatterns" class="header-anchor">#</a> <code>discoveryPatterns</code></h4> <p>指示 Crawler 应该访问哪些网页，支持 <a href="https://github.com/micromatch/micromatch" target="_blank" rel="noopener noreferrer"><code>micromatch</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。Crawler 会提取这些页面链接的页面，但不会从这些中间页面提取记录时。比如博客列表页面：<code>https://cp3hnu.github.io/blog/page/xx</code>。</p> <h4 id="exclusionpatterns"><a href="#exclusionpatterns" class="header-anchor">#</a> <code>exclusionPatterns</code></h4> <p>告诉 Crawler 要忽略或排除哪些 URL。支持 <a href="https://github.com/micromatch/micromatch" target="_blank" rel="noopener noreferrer"><code>micromatch</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。后面有用到。</p> <h4 id="sitemaps"><a href="#sitemaps" class="header-anchor">#</a> <code>sitemaps</code></h4> <p>在 <code>sitemaps</code> 中找到的 URL 被视为 Crawler 的起始点。后面有用到。</p> <h4 id="actions"><a href="#actions" class="header-anchor">#</a> <code>actions</code></h4> <p>确定哪些网页以何种方式转换成 Algolia 记录。这是一个对象数组，也包含很多<a href="https://www.algolia.com/doc/tools/crawler/apis/configuration/actions/" target="_blank" rel="noopener noreferrer">参数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，常用的有下面三个参数：</p> <h5 id="indexname-2"><a href="#indexname-2" class="header-anchor">#</a> <code>indexName</code></h5> <p>操作对应的 Index（索引数据库）的名称</p> <h5 id="pathstomatch"><a href="#pathstomatch" class="header-anchor">#</a> <code>pathsToMatch</code></h5> <p>操作应该处理哪些网页。支持 <a href="https://github.com/micromatch/micromatch" target="_blank" rel="noopener noreferrer"><code>micromatch</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h5 id="recordextractor"><a href="#recordextractor" class="header-anchor">#</a> <code>recordExtractor</code></h5> <p>一个自定义 Javascript 函数，他从页面中提取所需的内容，生成 Algolia 记录，存于索引数据库里。这个函数返回 JSON 对象数组或空数组，如果是一个空数组，表示跳过该页。</p> <p>Algolia  提供了多个内置的函数帮助我们快速集成，可以通过 <code>recordExtractor</code> 的 <code>helpers</code> 参数访问 。<code>helpers.docsearch</code> 内置函数用于 DocSearch 集成，他提取文档的 H0~H5 标题以及文档内容，生成  Algolia 记录。</p> <p><strong>这里的关键就是，为了让 <code>helpers.docsearch</code> 知道哪些是 H0~H5 标题以及文档内容，需要指定 <code>lvl0 ~ lvl5</code> 以及 <code>content</code> 对应的 CSS 选择器</strong>。对于 VuePress v1，他的配置应该是这样的：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  lvl0: {
    selectors: 'p.sidebar-heading.open',
    defaultValue: 'Documentation',
  },
  lvl1: '.content__default h1',
  lvl2: '.content__default h2',
  lvl3: '.content__default h3',
  lvl4: '.content__default h4',
  lvl5: '.content__default h5',
  content: '.content__default p, .content__default li',
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>关于 <code>helpers.docsearch</code> 函数的更多详情，请参考 <a href="https://docsearch.algolia.com/docs/record-extractor/#recordprops-api-reference" target="_blank" rel="noopener noreferrer">Record Extractor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h4 id="initialindexsettings"><a href="#initialindexsettings" class="header-anchor">#</a> <code>initialIndexSettings</code></h4> <p>Crawler 索引数据库的配置，参数更多，完整列表请参考 <a href="https://www.algolia.com/doc/api-reference/settings-api-parameters/" target="_blank" rel="noopener noreferrer">Crawler Index Settings Parameters<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h5 id="attributestoretrieve"><a href="#attributestoretrieve" class="header-anchor">#</a> <code>attributesToRetrieve</code></h5> <p><a href="https://www.algolia.com/doc/api-reference/api-parameters/attributesToRetrieve/" target="_blank" rel="noopener noreferrer"><code>attributesToRetrieve</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 参数控制抓取哪些属性，不抓取哪些属性。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  attributesToRetrieve<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'hierarchy'</span><span class="token punctuation">,</span> <span class="token string">'content'</span><span class="token punctuation">,</span> <span class="token string">'anchor'</span><span class="token punctuation">,</span> <span class="token string">'url'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>hierarchy</code> 关键，之前的错误</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Uncaught (in promise) TypeError: Cannot read properties of undefined (reading 'lvl0')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>就是因为没有抓取到 <code>hierarchy</code> 值，导致读取 <code>hierarchy.lv10</code> 值时报错。</p> <h5 id="searchableattributes"><a href="#searchableattributes" class="header-anchor">#</a> <code>searchableAttributes</code></h5> <p><a href="https://www.algolia.com/doc/api-reference/api-parameters/searchableAttributes/" target="_blank" rel="noopener noreferrer"><code>searchableAttributes</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 参数控制搜索时匹配哪些属性。数量越少，检索速度越快。越排在前面的属性优先级越高。DocSearch 提供的 VuePress v1 的模板有很多的属性，<code>hierarchy_radio</code>、<code>hierarchy_radio_camel</code>、<code>hierarchy_camel</code> 好像没什么用，文档里也找不到它们的定义，因此我简化为</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
   searchableAttributes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;unordered(hierarchy.lvl0)&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;unordered(hierarchy.lvl1)&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;unordered(hierarchy.lvl2)&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;unordered(hierarchy.lvl3)&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;unordered(hierarchy.lvl4)&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;unordered(hierarchy.lvl5)&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;unordered(hierarchy.lvl6)&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>unordered</code> 是一个 <a href="https://www.algolia.com/doc/api-reference/api-parameters/searchableAttributes/#modifiers" target="_blank" rel="noopener noreferrer">Modifiers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。忽略属性中匹配的位置。默认情况，从属性开头的匹配优先级更高。设置 <code>unordered</code> 使所有匹配优先级相等，不管匹配的位置。</p> <h5 id="attributestohighlight"><a href="#attributestohighlight" class="header-anchor">#</a> <code>attributesToHighlight</code></h5> <p><a href="https://www.algolia.com/doc/api-reference/api-parameters/attributesToHighlight/" target="_blank" rel="noopener noreferrer"><code>attributesToHighlight</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 控制哪些属性要高亮显示。使用 <code>highlightPreTag</code> 和 <code>highlightPostTag</code> 元素进行包裹。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  attributesToHighlight<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;hierarchy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;content&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="camelcaseattributes"><a href="#camelcaseattributes" class="header-anchor">#</a> <code>camelCaseAttributes</code></h5> <p><a href="https://www.algolia.com/doc/api-reference/api-parameters/camelCaseAttributes/" target="_blank" rel="noopener noreferrer"><code>camelCaseAttributes</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 参数控制拆分哪些驼峰格式属性为多个单词，比如 <code>camelCaseAttributes</code> 可以分成 3 个单词，<code>camel</code>、<code>case</code>、<code>attributes</code>， 这个一般用于英语环境中。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>camelCaseAttributes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;hierarchy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;content&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="attributefordistinct-和-distinct"><a href="#attributefordistinct-和-distinct" class="header-anchor">#</a> <code>attributeForDistinct</code> 和 <code>distinct</code></h5> <p><a href="https://www.algolia.com/doc/api-reference/api-parameters/attributeForDistinct/" target="_blank" rel="noopener noreferrer"><code>attributeForDistinct</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://www.algolia.com/doc/api-reference/api-parameters/distinct/" target="_blank" rel="noopener noreferrer"><code>distinct</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 两个参数控制分组的属性名称。</p> <p>所有具有相同 <code>attributeForDistinct</code> 值的记录都被视为一个组。一般设置为 <code>url</code></p> <p><code>distinct</code> 确定搜索结果中每组可以包含多少个变体（variant）。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
   attributeForDistinct<span class="token operator">:</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span>
   distinct<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="ranking"><a href="#ranking" class="header-anchor">#</a> <code>ranking</code></h5> <p><a href="https://www.algolia.com/doc/api-reference/api-parameters/ranking/" target="_blank" rel="noopener noreferrer"><code>ranking</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 参数确定排序方式。一般保留默认的排序即可。</p> <p>排序策略请参考 <a href="https://www.algolia.com/doc/api-reference/api-parameters/ranking/#ranking-criteria" target="_blank" rel="noopener noreferrer">Ranking criteria<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://www.algolia.com/doc/guides/managing-results/relevance-overview/in-depth/ranking-criteria/#attribute-and-proximity-combinations" target="_blank" rel="noopener noreferrer">The eight ranking criteria<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  ranking<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;words&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;filters&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;typo&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;attribute&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;proximity&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;exact&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
 <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h5 id="customranking"><a href="#customranking" class="header-anchor">#</a> <code>customRanking</code></h5> <p><a href="https://www.algolia.com/doc/api-reference/api-parameters/customRanking/" target="_blank" rel="noopener noreferrer"><code>customRanking</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 参数确定自定义排名属性。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  customRanking<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;desc(weight.pageRank)&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;desc(weight.level)&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;asc(weight.position)&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="typotolerance"><a href="#typotolerance" class="header-anchor">#</a> <code>typoTolerance</code></h5> <p><a href="https://www.algolia.com/doc/api-reference/api-parameters/typoTolerance/" target="_blank" rel="noopener noreferrer"><code>typoTolerance</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 参数控制是否允许错别字。</p> <h2 id="验证"><a href="#验证" class="header-anchor">#</a> 验证</h2> <h3 id="验证-crawler-配置"><a href="#验证-crawler-配置" class="header-anchor">#</a> 验证 Crawler 配置</h3> <p>可以在 Crawler 的 &quot;Editor&quot; 页面验证 Crawler 配置</p> <p><img src="/assets/img/doc-serach-url-test.e1bbe053.png" alt=""></p> <h3 id="验证-docsearch-搜索"><a href="#验证-docsearch-搜索" class="header-anchor">#</a> 验证 DocSearch 搜索</h3> <p>可以在 Index 页面进行搜索验证</p> <p><img src="/assets/img/doc-search-search-test.e793fd6c.png" alt=""></p> <h2 id="创建-sitemaps"><a href="#创建-sitemaps" class="header-anchor">#</a> 创建 Sitemaps</h2> <p>通过上一步配置 Crawler，现在搜索时不会报错了，而且可以搜索到内容了，但是在我使用的过程中发现，有些页面的内容搜索不到，通过查看 Crawler 的 <code>Monitoring tool</code> 或者 <code>URL inspector</code> 发现有些页面并没有被抓取。</p> <p>原因是 VuePress 是根据 Markdown 文件自动生成 URL，Algolia Crawler 可能不知道（或者会漏掉）某些 URL。</p> <p>一个解决办法是，手动将漏掉的 URL 添加到 <a href="https://www.algolia.com/doc/tools/crawler/apis/configuration/extra-urls/" target="_blank" rel="noopener noreferrer"><code>extraUrls</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  extraUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'https://cp3hnu.github.io/2024/08/23/node-cli/'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果漏掉的 URL 很多，一个一个添加太麻烦了。更好的方式是使用 Sitemaps。Sitemaps 是网站管理员告知搜索引擎，网站有哪些页面可以抓取。Crawler 也使用 Sitemaps 抓取页面内容。</p> <p>VuePress v1 可以使用 <a href="https://github.com/ekoeryanto/vuepress-plugin-sitemap" target="_blank" rel="noopener noreferrer"><code>vuepress-plugin-sitemap</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 插件帮我们创建 Sitemaps。</p> <p>首先安装 <code>vuepress-plugin-sitemap</code></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ <span class="token function">npm</span> i -D vuepress-plugin-sitemap 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后添加配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span>
    <span class="token string">'sitemap'</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      hostname<span class="token operator">:</span> <span class="token string">'https://cp3hnu.github.io'</span><span class="token punctuation">,</span> <span class="token comment">// ✅ 你的站点地址</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>编译就会生成 <code>sitemap.xml</code> 文件，然后我们修改 Crawler 配置。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Crawler</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  sitemaps<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'https://cp3hnu.github.io/sitemap.xml'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>点击 &quot;Start Crawling&quot; 重新抓取，此时网站上所有的页面内容都被抓取到了。</p> <h2 id="排除-url"><a href="#排除-url" class="header-anchor">#</a> 排除 URL</h2> <p>如果网站上有些内容不想被抓取，有哪些方法呢？我通过熟读 <a href="https://www.algolia.com/doc/tools/crawler/getting-started/overview/" target="_blank" rel="noopener noreferrer">Algolia Crawler<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 文档，总结出三种方法，由粗到细：</p> <h3 id="exclusionpatterns-2"><a href="#exclusionpatterns-2" class="header-anchor">#</a> <code>exclusionPatterns</code></h3> <p>最简单的方式是使用 <a href="https://www.algolia.com/doc/tools/crawler/apis/configuration/exclusion-patterns/" target="_blank" rel="noopener noreferrer"><code>exclusionPatterns</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 配置，全局排除 URL，支持 <a href="https://github.com/micromatch/micromatch" target="_blank" rel="noopener noreferrer"><code>micromatch</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。比如我不想 <code>https://cp3hnu.github.io/tag/</code> 下的网页内容被抓取，可以这么设置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>exclusionPatterns<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">'https://cp3hnu.github.io/tag/**'</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="actions-pathstomatch"><a href="#actions-pathstomatch" class="header-anchor">#</a> <code>actions.pathsToMatch</code></h3> <p>如果只是想排除某个 Action 抓取某些页面的内容，可以使用 <code>actions.pathsToMatch</code>，也支持 <a href="https://github.com/micromatch/micromatch" target="_blank" rel="noopener noreferrer"><code>micromatch</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，但是需要是使用 negation 标识（<code>!</code>）。比如某些页面的数据格式跟您的 blog 页面的数据格式不同，就可以把这些页面排除出 blog 索引数据库。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>actions<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    indexName<span class="token operator">:</span> <span class="token string">'cp3hnu_github_io_du4vgyodoq_pages'</span><span class="token punctuation">,</span>
    pathsToMatch<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'https://cp3hnu.github.io/**'</span><span class="token punctuation">,</span> <span class="token string">'!https://cp3hnu.github.io/product/**'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="actions-recordextractor"><a href="#actions-recordextractor" class="header-anchor">#</a> <code>actions.recordExtractor</code></h3> <p>如果 <code>actions.recordExtractor</code> 返回一个空数组，表示忽略该页面的内容，可以更加细粒度的控制是否抓取某些页面的内容，比如可以根据查询字符串忽略页面的内容。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">recordExtractor</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url<span class="token punctuation">,</span> $<span class="token punctuation">,</span> contentLength<span class="token punctuation">,</span> fileType <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 排除包含特定查询字符串的 URL</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>url<span class="token punctuation">.</span>search <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>url<span class="token punctuation">.</span>search<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&quot;Itemid=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 返回空数组，表示跳过</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <ul><li><a href="https://www.algolia.com/" target="_blank" rel="noopener noreferrer">Algolia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.algolia.com/doc/" target="_blank" rel="noopener noreferrer">Algolia Document<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docsearch.algolia.com/" target="_blank" rel="noopener noreferrer">Algolia DocSearch Document<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/algolia/docsearch" target="_blank" rel="noopener noreferrer"><code>algolia/docsearch</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.algolia.com/doc/tools/crawler/getting-started/overview/" target="_blank" rel="noopener noreferrer">Algolia Crawler<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docsearch.algolia.com/docs/templates" target="_blank" rel="noopener noreferrer">DocSearch 模版<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.algolia.com/doc/tools/crawler/apis/configuration/" target="_blank" rel="noopener noreferrer">Crawler Configuration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.algolia.com/doc/tools/crawler/apis/configuration/actions/" target="_blank" rel="noopener noreferrer">Crawler Action Parameters<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docsearch.algolia.com/docs/record-extractor/#recordprops-api-reference" target="_blank" rel="noopener noreferrer">Crawler Record Extractor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.algolia.com/doc/api-reference/settings-api-parameters/" target="_blank" rel="noopener noreferrer">Crawler Index Settings Parameters<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v1.vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">VuePress v1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v1.vuepress.vuejs.org/zh/theme/default-theme-config.html#algolia-%E6%90%9C%E7%B4%A2" target="_blank" rel="noopener noreferrer">VuePress v1 默认主题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v1.vuepress.vuejs.org/zh/theme/blog-theme.html" target="_blank" rel="noopener noreferrer">VuePress v1 博客主题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://vitepress.dev/" target="_blank" rel="noopener noreferrer">VitePress<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://astro.build/" target="_blank" rel="noopener noreferrer">Astro<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/ekoeryanto/vuepress-plugin-sitemap" target="_blank" rel="noopener noreferrer"><code>ekoeryanto/vuepress-plugin-sitemap</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#接入-docsearch" title="接入 DocSearch">接入 DocSearch</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#crawler" title="Crawler">Crawler</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#indexname" title="indexName">indexName</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#创建-crawler" title="创建 Crawler">创建 Crawler</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#手动配置-crawler" title="手动配置 Crawler">手动配置 Crawler</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#crawler-的配置项" title="Crawler 的配置项">Crawler 的配置项</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#验证" title="验证">验证</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#验证-crawler-配置" title="验证 Crawler 配置">验证 Crawler 配置</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#验证-docsearch-搜索" title="验证 DocSearch 搜索">验证 DocSearch 搜索</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#创建-sitemaps" title="创建 Sitemaps">创建 Sitemaps</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#排除-url" title="排除 URL">排除 URL</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#exclusionpatterns-2" title="exclusionPatterns">exclusionPatterns</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#actions-pathstomatch" title="actions.pathsToMatch">actions.pathsToMatch</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#actions-recordextractor" title="actions.recordExtractor">actions.recordExtractor</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#references" title="References">References</a></div></div></div></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.b07256e7.js" defer></script><script src="/assets/js/34.49b71b2c.js" defer></script><script src="/assets/js/3.276926dd.js" defer></script><script src="/assets/js/12.8da07182.js" defer></script>
  </body>
</html>
